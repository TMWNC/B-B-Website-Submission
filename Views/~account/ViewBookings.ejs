<!DOCTYPE html>
<html lang="en-GB">
  <%- include('../Partials/head') %>
<body>
  <%- include('../Partials/banner') %>
  <%- include('../Partials/search') %>

  <section class="content-section list-cards">
    <% if (customerbookings && customerbookings.length > 0) { %>
      <% customerbookings.forEach(booking => { %>
        <article class="holidayBookingCard roundedbox">
          
          <!-- Hotel image -->
          <div class="hotelImageWrapper">
            <img class="hotelImage" 
                 src="<%= booking.HotelImageURL || '../../Public/assets/images/default-hotel.jpg' %>" 
                 alt="Hotel image">
          </div>

          <!-- Booking details -->
          <div class="booking-details">
            <h2 class="booking-ref">
              Booking Reference: <span><%= booking.BookingReference %></span>
            </h2>
            <p class="booking-date">
              Booked on: <strong><%= new Date(booking.DateOfBooking).toLocaleDateString("en-GB") %></strong>
            </p>
            <p class="hotel-name">
              <%= booking.HotelName %> - <%= booking.BoardTypeName %>
            </p>
            <p class="trip-info">
              <%= booking.TownName %>, <%= booking.CountryName %> 
              • <%= booking.Adults %> Adults 
              <% if (booking.Children > 0) { %> • <%= booking.Children %> Children <% } %>
              • <%= booking.NumOfNights %> Nights
            </p>

            <% if (booking.OutboundDate) { %>
              <p class="Flight-info">
                Outbound • <%= booking.OutboundOrigin %> - <%= booking.OutboundDest %>
                • <%= new Date(booking.OutboundDate).toLocaleDateString("en-GB") %>
                <%= booking.OutboundTime %>
              </p>
              <p class="Flight-info">
                Inbound • <%= booking.InboundOrigin %> - <%= booking.InboundDest %>
                • <%= new Date(booking.InboundDate).toLocaleDateString("en-GB") %>
                <%= booking.InboundTime %>
              </p>
              <p class="price">
                Flight Price: <strong>£<%= booking.FlightTotal %></strong>
              </p>
            <% } %>

            <p class="price">
              Hotel Price: <strong>£<%= booking.HotelTotal %></strong>
            </p>
            <p class="price total">
              Total: <strong>£<%= booking.TotalCost %></strong>
            </p>
          </div>

          <!-- Action buttons -->
          <div class="booking-actions">
            <a href="/booking/view/<%= booking.BookingReference %>" class="btn">View Details</a>
            <a href="/booking/invoice/<%= booking.BookingReference %>" class="btn secondary">Download Invoice</a>
          </div>
        </article>
      <% }) %>
    <% } else { %>
      <p>You have no bookings yet.</p>
    <% } %>
  </section>

  <%- include('../Partials/footer') %>
  <script src="../../Public/Javascript/togglesearch.js"></script>
</body>
</html>
